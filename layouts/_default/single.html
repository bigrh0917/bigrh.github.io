<!doctype html>
<html lang="en">
{{ partial "head.html" . }}
<body>
<a class="skip-link" href="#main">Skip to main</a>
<main id="main">

    <!-- 判断当前页面是否是 about.md -->
    {{- $isAbout := eq .File.LogicalName "about.md" -}}

    <!-- 判断是否存在二级标题 -->
    {{- $hasH2 := false -}}
    {{- if not $isAbout -}}
    {{- range .Content | findRE "<h2[^>]*>.*</h2>" -}}
    {{- $hasH2 = true -}}
    {{- end -}}
    {{- end -}}

    <!-- 如果不是 about.md 且存在二级标题，显示大纲 -->
    {{ if and (not $isAbout) $hasH2 }}
    <aside class="toc">
        <h2>Contents</h2>
        {{ .TableOfContents }}
    </aside>
    {{ end }}


    <div class="content">
        {{ partial "header.html" . }}

        <section>
            <h2 class="post">{{ .Title }}</h2>
            {{ .Content }}
            {{ if ne .Section "pages" }}
            <div class="post-date">
                <span class="g time">{{.Date.Format "January 2, 2006"}} </span> &#8729;
                {{ $taxonomy := "tags" }} {{ with .Param $taxonomy }}
                {{ range $index, $tag := . }} {{ with $.Site.GetPage (printf "/%s/%s"
                $taxonomy $tag) -}}
                <a href="{{ .Permalink }}">{{ $tag | urlize }}</a>
                {{- end -}} {{- end -}}
                {{ end }}
            </div>
            {{ end }}
        </section>
        {{ if eq .Section "posts" }}
        {{ if eq .Site.Params.comments.enabled true }}
        <div id="comments">
            {{ partial "comments.html" $ }}
        </div>
        {{ end }}
        {{ end }}
    </div>


</main>

</body>

</html>
